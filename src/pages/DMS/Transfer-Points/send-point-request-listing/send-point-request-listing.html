<ion-header>
    <ion-navbar>
        <ion-title>My Transfer Requests</ion-title>
    </ion-navbar>
    <ion-toolbar>
        <div class="search add-search">
            <div class="filter">
                <ion-searchbar type='text' name="master_search" [(ngModel)]="filter.master_search" (keydown.enter)="getRequestList(ActiveTab)"></ion-searchbar>
            </div>
        </div>
    </ion-toolbar>
</ion-header>

<ion-content>
    
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content  pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles" refreshingText="Refreshing...">
        </ion-refresher-content>
    </ion-refresher>
    
    <div class="capsule-tabs">
        <ul>
            <li [ngClass]="{'active' : ActiveTab=='Pending'}" (click)="ActiveTab='Pending' ;getRequestList(ActiveTab)">
                <p>Pending
                    <span>{{requestCounts.Pending}}</span>
                </p>
            </li>
            
            <li [ngClass]="{'active' : ActiveTab=='Approved'}" (click)="ActiveTab='Approved';getRequestList(ActiveTab)">
                <p>Approved
                    <span>{{requestCounts.Approved}}</span>
                </p>
            </li>
            
            <li [ngClass]="{'active' : ActiveTab=='Reject'}" (click)="ActiveTab='Reject';getRequestList(ActiveTab)">
                <p>Rejected
                    <span>{{requestCounts.Reject}}</span>
                </p>
            </li>
        </ul>
    </div>
    
    
    <div class="padding16">
        <div class="list-box" *ngFor="let row of requestList" (click)="goOnSendPointReqDetail(row.id)">
            <div class="mid mt0">
                <div class="content-info">
                    <div class="left-info" >
                        <div class="circle">{{row.company_name.substring(0,1).toUpperCase()}}</div>
                    </div>

                    <div class="right-info" >
                        <p>{{row.company_name.toUpperCase()}}</p>
                        <p>{{row.name | titlecase}} ({{row.mobile}})</p>
                    </div>
                </div>
                
                <div class="tag-info">
                    <a><i class="material-icons">chevron_right</i></a>
                </div>
            </div>
            
            <div class="upper">
                <div class="left-date">
                    <div class="date-section">
                        <p>{{row.date_created | date:'d MMM y hh:mm a'}}</p>
                        <p>Date Created</p>
                    </div>
                    
                    <div class="date-section">
                        <p>{{row.total_items}}</p>
                        <p>Total Item</p>
                    </div>
                    
                    <div class="date-section">
                        <p>{{row.total_item_qty}}</p>
                        <p>Total Item Qty</p>
                    </div>
                    
                    <!-- <div class="date-section">
                        <p>{{row.total_points}}</p>
                        <p>Total Point</p>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="nothing-here" style="height: 50%;" *ngIf="!requestList?.length">
        <div class="outer">
            <div class="innear">
                <img src="assets/imgs/no_found.svg" alt="">
                <p>Data Not Available</p>
            </div>
        </div>
    </div>
    
    <!-- <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)" *ngIf="flag!=1">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll> -->
    
    <ion-fab right bottom>
        <button ion-fab color="primary" (click)="goToSendPointRequest()">
            <ion-icon name="add"></ion-icon>
        </button>
    </ion-fab>
    
</ion-content>
