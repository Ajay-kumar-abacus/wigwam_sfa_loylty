<ion-header>
    <ion-navbar>
        <ion-title>
            Add {{Type}}
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content>

    <div class="edit">
        <ion-list>
            <ion-item class="cs-normal-select retailerSelectionBox mt16" *ngIf="data.type_name" >
                <ion-label>Category Type<strong class="red-text">*</strong></ion-label>
                <ion-select interface="action-sheet" name="product_type" #product_type="ngModel" [disabled]="true" [(ngModel)]="data.product_type"
                   required>
                  <ion-option value="SS">SS</ion-option>
                  <ion-option value="S">S</ion-option>
                </ion-select>
              </ion-item>
            <ion-item class="cs-normal-select retailerSelectionBox mt16" *ngIf="data.distributor_id">
                <ion-label>Brand <strong class="red-text">*</strong></ion-label>
                <ionic-selectable item-content name="brand" #brand="ngModel" [(ngModel)]="data.brand"
                    [items]="brandList" itemValueField="brand_code" itemTextField="display_name" [canSearch]="true"
                    #itemselectable modalCssClass="f1" (ngModelChange)="getThickness(data.brand)"></ionic-selectable>
            </ion-item>


            <ion-item class="cs-normal-select retailerSelectionBox mt16" *ngIf="data.distributor_id">
                <ion-label>Thickness <strong class="red-text">*</strong></ion-label>
                <ion-select interface="action-sheet" name="thickness" [(ngModel)]="data.thickness" #thickness="ngModel"
                    (ngModelChange)="getSize(data.thickness);">
                    <ion-option *ngFor="let row of thicknessList"
                        value="{{row.thickness}}">{{row.thickness}}</ion-option>
                </ion-select>
            </ion-item>




            <ion-item class="cs-normal-select retailerSelectionBox mt16" *ngIf="data.distributor_id">
                <ion-label>Size <strong class="red-text">*</strong></ion-label>
                <ion-select interface="action-sheet" name="size" [(ngModel)]="data.size" #size="ngModel"
                    (ngModelChange)="getProductData();">
                    <ion-option *ngFor="let row of sizeList" value="{{row.size}}">{{row.size}}</ion-option>
                </ion-select>
            </ion-item>
            <ion-item class="cs-normal-select retailerSelectionBox mt16"
                *ngIf="data.size && data.thickness && data.brand">
                <ion-label floating>No. of Sheets <strong class="red-text">*</strong></ion-label>
                <ion-input type="number" name="qty" [(ngModel)]="data.qty" #size="ngModel" placeholder="No. of Sheets"
                    (ngModelChange)="(data.qty == '' || data.qty == null || data.qty<1 )?(addToListButton = true):(addToListButton = false);"
                    onkeypress="return event.charCode>=48 && event.charCode<=57"></ion-input>
            </ion-item>



        </ion-list>

        <div class="mt16" *ngIf="data.qty ">
            <button ion-button class="cs-btn" [disabled]="addToListButton" (click)="addToList()">Add To List</button>
        </div>

        <div class="cs-heading1 pl0" *ngIf="product_list.length">

            <p>PRODUCT INFORMATION</p>

        </div>

        <div class="list-box mt10" *ngFor="let row of product_list;let i=index">
            <div class="mid mt0" style="display: flex;justify-content: space-between;">
                <div class="content-info">
                    <div class="right-info">
                        <p style="color:rgb(0, 119, 255)">{{row.segment_name}}</p>
                        <div class="mt2 mb2" style="display:flex;flex-direction:row">
                            <p class="pr2" style="color:rgb(255, 153, 0)">#{{i+1}} </p>
                            <p> {{row.product_name}}</p>
                        </div>
                    </div>
                </div>
                <div class="tag-info">
                    <button><i class="material-icons red-clr" (click)="DeleteItem(i)">delete_sweep</i></button>
                </div>
            </div>

            <div class="three_boxes">
                <div class="lower">
                    <p class="font10">Brand</p>
                    <p class="font10">{{row.brand}}</p>
                </div>
                <div class="lower ml5">
                    <p class="font10">Thickness</p>
                    <p class="font10">{{row.thickness}}</p>
                </div>
                <div class="lower ml5">
                    <p class="font10">Category</p>
                    <p class="font10">{{row.product_type}}</p>
                </div>

            </div>

            <div class="three_boxes">
                <div class="lower">
                    <p class="font10">No. of Sheets</p>
                    <p class="font10">{{row.qty}}</p>
                </div>
                <div class="lower ml5">
                    <p class="font10">Size</p>
                    <p class="font10">{{row.size}}</p>
                </div>
                <div class="lower ml5">
                    <p class="font10">Price</p>
                    <p class="font10">&#x20B9; {{row.total_price}}</p>
                </div>
            </div>
        </div>

        <div class="edit pl0 pr0 pb0" *ngIf="product_list.length">
            <ion-list no-lines>
                <div class="gst-type">
                    <ion-list radio-group name="gst_type" [(ngModel)]="data.gst_type" #gst_type="ngModel"
                        [disabled]="add_list.length > 0"
                        (ionChange)="applyExtraDiscounts(data.discount);" class="gst-type">
                        <ion-item ><ion-label>APPLY GST</ion-label></ion-item>
                        <ion-item [ngClass]="{'active': data.gst_type == 'Gst Paid' }">
                            <ion-radio value="Gst Paid"></ion-radio>
                            <ion-label>YES</ion-label>
                        </ion-item>
                        <ion-item [ngClass]="{'active': data.gst_type == 'Gst Extra'}">
                            <ion-radio value="Gst Extra"></ion-radio>
                            <ion-label>NO</ion-label>
                        </ion-item>
                    </ion-list>
                </div>
            </ion-list>
        </div>
        <div class="cart-bottom" *ngIf="product_list.length">
            <input type="number" name="discount" [(ngModel)]="data.discount" placeholder="Discount %">
            <button (click)="applyExtraDiscounts(data.discount);" ion-button round color="primary"><i class="material-icons">add</i></button>
         </div>

        <div class="mt10" *ngIf="product_list.length > 0">

            <div class="time_show amount-listing">
                <p>Total Item</p>
                <p>{{product_list.length}}</p>
            </div>
            <div class="time_show amount-listing">
                <p>Total No. of Sheets</p>
                <p>{{total_qty}}</p>
            </div>
            <div class="time_show amount-listing">
                <p>Total Amount</p>
                <p>&#x20B9; {{totalPrice | number:'1.2-2'}}</p>
            </div>
            <div class="time_show amount-listing">
                <p>Total Discount ({{extraDiscountPercentage}}%)</p>
                <p>&#x20B9; {{extra_discount_amount | number:'1.2-2'}}</p>
            </div>
            <div class="time_show amount-listing">
                <p>Net Price</p>
                <p>&#x20B9; {{priceAfterextraDiscount | number:'1.2-2'}}</p>
            </div>
            <div class="time_show amount-listing">
                <p>GST(18%)</p>
                <p>&#x20B9; {{totalGSTApplied | number:'1.2-2'}}</p>
            </div>
            <div class="time_show amount-listing">
                <p>Grand Total</p>
                <p>&#x20B9; {{totalPriceAfterGST | number:'1.2-2'}}</p>
            </div>
        </div>


        <ion-list *ngIf="product_list.length">

            <!-- <ion-item class="cs-textarea1 ">
                <ion-label floating><span>Any Remarks <strong class="red-text">*</strong></span></ion-label>
                <ion-textarea name="remark" [(ngModel)]="data.remark" onpaste="return false;"></ion-textarea>
            </ion-item> -->
        </ion-list>



        <div class="mt16 mb16" *ngIf="product_list.length > 0 ">
            <!-- *ngIf="!this.OrderItem && !this.order_data" -->
            <button ion-button [disabled]="btndisable" class="Buttons wp100"
                (click)="user_data.order_status='Approved';save_orderalert('submit');">
                <ion-spinner *ngIf="btnDisableSave"></ion-spinner>
                Save
            </button>

        </div>

    </div>

</ion-content>