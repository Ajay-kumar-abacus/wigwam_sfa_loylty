<ion-header>
  <ion-navbar color="primary">
    <ion-title *ngIf="target_Type=='My'" class="main-title">My Target Dashboard</ion-title>
    <ion-title *ngIf="target_Type=='Team'" class="main-title">Team Target Dashboard</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="QuarterSet()" class="action-button">
        <i class="material-icons">date_range</i>
      </button>
      <button ion-button icon-only (click)="presentPopover($event)" *ngIf="teamCount > 0" class="action-button">
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content class="page-target">
  <div class="date-range-display" *ngIf="count != 0">
    <span>{{target_list.date_from | date:'dd MMM yyyy'}} - {{target_list.date_to | date:'dd MMM yyyy'}}</span>
  </div>
  
  <div class="edit m4" *ngIf="target_Type=='Team'">
    <ion-list>
      <ion-item class="cs-normal-select retailerSelectionBox mt0 mb0">
        <ion-label>Select User</ion-label>
        <ionic-selectable item-content name="data" [(ngModel)]="data" [items]="user_list" itemValueField="id" itemTextField="name" [canSearch]="true" #selectComponent (ngModelChange)="targetList()"></ionic-selectable>
      </ion-item>
    </ion-list>
  </div>
  
  <div class="pl16 pr16" *ngIf="count !=0">
    <div class="secondaryTargetSummary">
      <div class="summary-heading">Performance Metrics</div>
      <ion-list class="mt10">
        <!-- Primary Target Card -->
        <div class="target-card">
          <div class="card-header">
            <ion-icon name="stats" class="card-icon primary-icon"></ion-icon>
            <h2>Primary Sales</h2>
          </div>
          <div class="card-content">
            <div class="metric-row">
              <div class="metric">
                <span class="label">Target</span>
                <span class="value">{{target_list.primary_target || '0'}}</span>
              </div>
              <div class="metric achievement">
                <span class="label">Achievement</span>
                <span class="value blink-achievement" [ngClass]="{'highlight': target_list.primary_achv > target_list.primary_target}">{{target_list.primary_achv || '0'}}</span>
              </div>
              <div class="metric percentage">
                <span class="label">Completion</span>
                <span class="value">{{target_list.primary_target ? ((target_list.primary_achv / target_list.primary_target) * 100).toFixed(1) : 0}}%</span>
              </div>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar primary" [style.width.%]="(target_list.primary_target ? (target_list.primary_achv / target_list.primary_target) * 100 : 0)"></div>
            </div>
          </div>
        </div>
        
        <!-- Secondary Target Card -->
        <div class="target-card">
          <div class="card-header">
            <ion-icon name="pulse" class="card-icon secondary-icon"></ion-icon>
            <h2>Secondary Sales</h2>
          </div>
          <div class="card-content">
            <div class="metric-row">
              <div class="metric">
                <span class="label">Target</span>
                <span class="value">{{target_list.secondary_target || '0'}}</span>
              </div>
              <div class="metric achievement">
                <span class="label">Achievement</span>
                <span class="value blink-achievement" [ngClass]="{'highlight': target_list.secondary_achv > target_list.secondary_target}">{{target_list.secondary_achv || '0'}}</span>
              </div>
              <div class="metric percentage">
                <span class="label">Completion</span>
                <span class="value">{{target_list.secondary_target ? ((target_list.secondary_achv / target_list.secondary_target) * 100).toFixed(1) : 0}}%</span>
              </div>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar secondary" [style.width.%]="(target_list.secondary_target ? (target_list.secondary_achv / target_list.secondary_target) * 100 : 0)"></div>
            </div>
          </div>
        </div>
        
        <!-- Stock Transfer Card -->
        <div class="target-card">
          <div class="card-header">
            <ion-icon name="swap" class="card-icon stock-icon"></ion-icon>
            <h2>Stock Transfer</h2>
          </div>
          <div class="card-content">
            <div class="metric-row">
              <div class="metric">
                <span class="label">Target</span>
                <span class="value">{{target_list.stock_target || '0'}}</span>
              </div>
              <div class="metric achievement">
                <span class="label">Achievement</span>
                <span class="value blink-achievement" [ngClass]="{'highlight': target_list.stock_achv > target_list.stock_target}">{{target_list.stock_achv || '0'}}</span>
              </div>
              <div class="metric percentage">
                <span class="label">Completion</span>
                <span class="value">{{target_list.stock_target ? ((target_list.stock_achv / target_list.stock_target) * 100).toFixed(1) : 0}}%</span>
              </div>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar stock" [style.width.%]="(target_list.stock_target ? (target_list.stock_achv / target_list.stock_target) * 100 : 0)"></div>
            </div>
          </div>
        </div>
      </ion-list>
    </div>
  </div>
  
  <div class="outer" *ngIf="count == 0">
    <div class="inner">
      <img src="assets/imgs/no_found.svg" alt="">
      <p>Target Data Not Available</p>
     
    </div>
  </div>

  
</ion-content>